var i=async t=>{try{if(!(t.request.headers.get("content-type")||"").includes("multipart/form-data"))return new Response("Invalid content type",{status:400});let e=(await t.request.formData()).get("file");if(!e)return new Response("No file provided",{status:400});if(!e.name.toLowerCase().endsWith(".fit"))return new Response("Only .fit files are supported",{status:400});let n=await caches.open("fit-analyzer-v2"),r=await e.arrayBuffer(),a=new Response(r,{headers:{"Content-Type":e.type||"application/octet-stream","X-File-Name":e.name}});return await n.put("/shared-file",a),Response.redirect("/?shared=true",303)}catch(s){return console.error("Share error:",s),new Response("Failed to process shared file",{status:500})}};export{i as onRequestPost};
