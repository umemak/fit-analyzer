function r(s,e){if(!s)return null;let t=s.split(";");for(let n of t){let[i,o]=n.trim().split("=");if(i===e)return o}return null}var u=async s=>{let e=new URL(s.request.url),t=s.env.APP_URL||e.origin,n=r(s.request.headers.get("Cookie"),"session");return n&&await s.env.DB.prepare("DELETE FROM sessions WHERE id = ?").bind(n).run(),new Response(JSON.stringify({success:!0}),{status:200,headers:{"Content-Type":"application/json","Set-Cookie":`session=; Path=/; HttpOnly; SameSite=Lax; Max-Age=0${e.protocol==="https:"?"; Secure":""}`}})};export{u as onRequestPost};
